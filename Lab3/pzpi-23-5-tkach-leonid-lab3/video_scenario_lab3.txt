СЦЕНАРІЙ ДЛЯ ВІДЕОЗАПИСУ ЛАБОРАТОРНОЇ РОБОТИ №3
Тема: Аналіз та рефакторинг коду. Складна бізнес-логіка та адміністрування.

Підготовка до запису:
1. Запустіть сервер: `uvicorn main:app --reload` (в папці Lab3/.../backend).
2. Відкрийте Swagger UI: `http://127.0.0.1:8000/docs`.
3. Переконайтеся, що є дані (User, Plant, SensorData), щоб аналітика працювала.
4. Відкрийте папку `backups` (або просто корінь проекту), щоб показати появу файлу.

---

1. Вступ (0:00 – 0:45)
На екрані: Титульний слайд або IDE.
Голос: "Вітаю. Мене звати Ткач Леонід, група ПЗПІ-23-5. Це демонстрація результатів лабораторної роботи номер 3. Тема мого проєкту: «Програмна система догляду за домашніми рослинами». В рамках цієї роботи було реалізовано серверну бізнес-логіку для аналізу стану рослин (прогнозування), а також функції адміністрування системи."

2. Функції Адміністрування (0:45 – 3:30)
На екрані: Swagger UI -> Admin.

   - Дія 1: Резервне копіювання (Backup)
     - Swagger: `POST /api/admin/backup` -> Execute.
     - Покажіть відповідь JSON (Status: success).
     - Покажіть папку `backups` у VS Code/Finder: "Ось створений файл з часовою міткою."

   - Дія 2: Експорт даних (Export)
     - Swagger: `GET /api/admin/export/sensor-data` -> Execute -> Download.
     - Відкрийте файл CSV (Excel/TextEdit).
     - "Ми бачимо вивантажені дані: вологість, температура та час."

   - Дія 3: Імпорт даних (Import)
     - Swagger: `POST /api/admin/import/sensor-data`.
     - Завантажте CSV файл.
     - "Дані успішно імпортовано назад у базу."

   - Дія 4: Керування користувачем
     - Swagger: `PATCH /api/admin/users/{user_id}/block`.
     - ID: 1, is_active: false -> Execute.
     - "Користувача заблоковано."

3. Бізнес-логіка (Analytics & Forecast) (3:30 – 5:30)
На екрані: Swagger UI -> Analytics.
Голос: "Перейдемо до бізнес-логіки. Ми реалізували алгоритм EWMA для прогнозування та аналізу."

   - Дія 1: Прогноз вологості
     - Swagger: `GET /api/plants/{plant_id}/analytics/forecast` (ID: 1).
     - Execute.
     - Поясніть: "Система аналізує тренд вологості, враховує температуру (weather correction) і дає прогноз."
     - Покажіть JSON: `forecast_ewma_corrected`, `trend`, `alert`.

   - Дія 2: Середні показники
     - Swagger: `GET /api/plants/{plant_id}/analytics/stats`.
     - Execute.
     - "Тут ми бачимо агреговані середні дані за весь час."

   - Дія 3: Погодинна статистика
     - Swagger: `GET /api/plants/{plant_id}/analytics/hourly`.
     - Execute.
     - "Це погодинний розподіл температур для виявлення перегріву в певні години доби."

4. Огляд коду (5:30 – 6:30)
На екрані: VS Code -> services.py.
Голос: "Код розділено на шари. Вся логіка — у services.py."
   - Покажіть метод `calculate_ewma` та `forecast_moisture`.
   - Покажіть `create_database_backup`.
   - "Контролери (admin.py, main.py) лише викликають ці функції."

5. Висновки (6:30 – 7:00)
Голос: "Таким чином, було успішно реалізовано функції адміністрування та складну аналітичну бізнес-логіку. Дякую за увагу!"
