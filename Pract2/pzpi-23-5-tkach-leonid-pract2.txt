ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
Кафедра програмної інженерії

ЗВІТ
з практичного заняття №2
з дисципліни «Аналіз та рефакторинг коду»
на тему: «Основи рефакторингу та роботи з Git»

Виконав: ст. гр. ПЗПІ-23-5 Ткач Л.В.
Перевірив:
ст. викладач кафедри ПІ
Сокорчук І. П.
Харків 2025

1. МЕТА
Опанування методології Git Flow та принципів "Clean Code" для покращення архітектури та підтримки IoT-системи "Smart Plant Care".

2. ХІД РОБОТИ

2.1. Git Flow (Організація репозиторію)
Для командної розробки та управління версіями проєкту була обрана стратегія Git Flow.
- `main`: Гілка для релізів, що містить стабільний код.
- `develop`: Основна гілка розробки, де інтегруються всі зміни.
- `feature/sensor-logic`: Приклад гілки для розробки нової функціональності (логіки роботи датчиків), яка після тестування зливається в `develop`.

2.2. Техніка 1: Rename Variable (Перейменування змінної)
Головна мета — зробити код зрозумілим без додаткових коментарів.
- Проблема: У початковому коді використовувалися змінні `x` та `val`.
- Рішення: Змінну `x` було замінено на `soilMoisture` (відображає фізичну сутність — вологість ґрунту), а змінну `val` на `pumpStatus` (стан насоса). Це дозволяє миттєво зрозуміти, з якими даними працює алгоритм.

2.3. Техніка 2: Extract Method (Виділення методу)
Головна функція циклу `loop()` була занадто великою та виконувала декілька задач одночасно.
- Проблема: Змішування логіки зчитування, обробки та керування обладнанням.
- Рішення: Логіку читання показників винесено в окремий метод `readSensors()`, а логіку дій (ввімкнення поливу) — у метод `waterPlant()`. Тепер `loop()` читається як сценарій дій.

2.4. Техніка 3: Replace Magic Number (Заміна магічного числа)
Використання числових літералів у коді ускладнює налаштування.
- Проблема: Число `300` у умові `if (x < 300)` не дає розуміння, чому обрано саме це значення.
- Рішення: Число замінено на іменовану константу `MOISTURE_CRITICAL_THRESHOLD`. Це не тільки пояснює значення, але й дозволяє легко калібрувати датчик під різні типи рослин (наприклад, для кактусів поріг буде нижчим, для тропічних рослин — вищим) в одному місці коду.

3. ПРИКЛАДИ КОДУ

3.1. Код "ДО" рефакторингу
Фрагмент коду на C++ (Arduino), де порушені принципи чистого коду.

void loop() {
  int x = analogRead(A0);
  if (x < 300) {
    digitalWrite(13, HIGH);
  }
}

3.2. Код "ПІСЛЯ" рефакторингу
Застосовано перейменування, виділення методів та константи.

const int MOISTURE_CRITICAL_THRESHOLD = 300;

void loop() {
  int soilMoisture = readSensors();
  
  if (soilMoisture < MOISTURE_CRITICAL_THRESHOLD) {
    activatePump();
  }
}

int readSensors() {
  return analogRead(A0);
}

void activatePump() {
    digitalWrite(13, HIGH);
}

ВИСНОВКИ
Проведений рефакторинг дозволив значно зменшити технічний борг проєкту. Код став читабельним та структурованим. Використання констант та окремих методів спрощує масштабування системи Smart Plant Care та додавання підтримки нових видів рослин у майбутньому.

ДОДАТОК А
Відеозапис
Посилання на відеозапис практичної роботи: https://youtu.be/tGbFq_Zq2qI

ДОДАТОК Б
Графічні матеріали
Рисунок Б.1 – Титульний слайд
Рисунок Б.2 – Мета та завдання
Рисунок Б.3 – Організація репозиторію (Git Flow)
Рисунок Б.4 – Актуальність рефакторингу
Рисунок Б.5 – Техніка Rename Variable
Рисунок Б.6 – Техніка Extract Method
Рисунок Б.7 – Техніка Replace Magic Number
Рисунок Б.8 – Демонстрація результату
Рисунок Б.9 – Висновки
