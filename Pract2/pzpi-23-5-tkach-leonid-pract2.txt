ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
Кафедра програмної інженерії

ЗВІТ
з практичного заняття №2
з дисципліни «Аналіз та рефакторинг коду»
на тему: «Основи рефакторингу та роботи з Git»

Виконав: ст. гр. ПЗПІ-23-5 Ткач Л.В.
Перевірив:
Харків 2025

1. МЕТА
Опанування стратегії Git Flow для командної розробки та застосування технік рефакторингу коду для покращення архітектури IoT-проєкту "Smart Plant Care System".

2. ХІД РОБОТИ

2.1. Стратегія Git Flow
Для організації процесу розробки в проєкті була впроваджена модель Git Flow. Вона дозволяє розділити стабільні версії продукту та поточну розробку:
- `main`: Гілка, що містить виключно стабільний, протестований код (Production ready).
- `develop`: Основна гілка інтеграції, де збираються всі нові зміни перед релізом.
- `feature/sensors`: Окрема гілка для реалізації логіки роботи з датчиками, яка зливається в `develop` тільки після завершення роботи.

2.2. Застосовані техніки рефакторингу
В ході аналізу коду прототипу було виявлено низку проблем (Code Smells), які було виправлено за допомогою наступних технік:

1. **Rename Variable (Перейменування змінної):**
   Змінна `val`, що зберігала значення з датчика вологості, не несла семантичного навантаження. Її було перейменовано на `soilMoisture`, що чітко відображає суть даних.

2. **Extract Method (Виділення методу):**
   Функція `loop()` була перевантажена логікою. Код зчитування даних та код керування насосом було винесено в окремі методи `readSensors()` та `waterPlant()`. Це зробило головний цикл програми лаконічним і зрозумілим.

3. **Replace Magic Number with Constant (Заміна магічного числа константою):**
   У коді використовувалося число `300` як поріг спрацювання поливу. Без коментарів його значення було незрозумілим. Число було замінено на іменовану константу `MOISTURE_THRESHOLD`, яка оголошена на початку файлу.

3. ПРИКЛАДИ КОДУ (C++ / Arduino)

3.1. Код "До" рефакторингу
Код важкий для сприйняття, містить "магічні числа" та незрозумілі змінні.

void loop() {
  int val = analogRead(A0);
  if (val < 300) {
    digitalWrite(13, HIGH);
    delay(5000);
    digitalWrite(13, LOW);
  }
  delay(1000);
}

3.2. Код "Після" рефакторингу
Код структурований, самодокументований та легкий для підтримки.

const int SENSOR_PIN = A0;
const int PUMP_PIN = 13;
const int MOISTURE_THRESHOLD = 300;
const int WATERING_TIME = 5000;

void loop() {
  int soilMoisture = readSensors();
  
  if (soilMoisture < MOISTURE_THRESHOLD) {
    waterPlant();
  }
  
  delay(1000);
}

int readSensors() {
  return analogRead(SENSOR_PIN);
}

void waterPlant() {
  digitalWrite(PUMP_PIN, HIGH);
  delay(WATERING_TIME);
  digitalWrite(PUMP_PIN, LOW);
}

ВИСНОВКИ
Впровадження Git Flow дозволило структурувати процес розробки та уникнути конфліктів при роботі над різними частинами системи. Застосування рефакторингу значно покращило архітектуру "Smart Plant Care System": код став чистішим, зрозумілішим та гнучкішим до змін. Виділення методів та використання констант дозволяє легко налаштовувати параметри системи без ризику порушити основну логіку.

СПИСОК ВИКОРИСТАНИХ ДЖЕРЕЛ
1. Martin Fowler. Refactoring: Improving the Design of Existing Code.
2. Atlassian Git Flow Workflow Tutorial.

ДОДАТОК А
Відеозапис
Посилання на відеозапис практичної роботи: https://youtu.be/placeholder_for_pract2

ДОДАТОК Б
Графічні матеріали
Рисунок Б.1 – Титульний слайд
Рисунок Б.2 – Мета та завдання
Рисунок Б.3 – Стратегія Git Flow
Рисунок Б.4 – Важливість рефакторингу
Рисунок Б.5 – Техніка Rename Variable
Рисунок Б.6 – Техніка Extract Method
Рисунок Б.7 – Техніка Magic Numbers
Рисунок Б.8 – Демонстрація результату
Рисунок Б.9 – Висновки
