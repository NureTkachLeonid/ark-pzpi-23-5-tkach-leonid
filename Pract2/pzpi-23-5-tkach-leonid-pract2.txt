ХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИ
Кафедра програмної інженерії

ЗВІТ
з практичного заняття №2
з дисципліни «Аналіз та рефакторинг коду»
на тему: «Основи рефакторингу та роботи з Git»

Виконав: ст. гр. ПЗПІ-23-5 Ткач Л.В.
Перевірив:
Харків 2025

1. МЕТА
Закріпити навички роботи з системою контролю версій Git та освоїти базові техніки рефакторингу для оптимізації кодової бази проєкту "Smart Plant Care".

2. ХІД РОБОТИ

2.1. Організація роботи з Git (Git Flow)
Для ефективного управління версіями в проєкті використовується модель розгалуження Git Flow:
- `main`: Гілка для стабільних релізів. Кожен коміт тут - це робоча версія продукту.
- `develop`: Основна гілка розробки, куди зливаються зміни від усіх розробників.
- `feat/Name`: Тимчасові гілки для нових функцій. Наприклад, `feat/sensor-reading` використовувалася для реалізації модуля зчитування даних з датчиків.

2.2. Застосовані техніки рефакторингу
Під час роботи над кодом було виявлено ділянки, що потребують покращення ("code smells"), та застосовано наступні техніки:

- **Extract Method (Виділення методу):**
  Складний блок коду, що відповідав за підключення до мережі, було винесено в окремий метод `connectToNetwork()`. Це зменшило розмір основної функції `setup()` та покращило читабельність.

- **Rename Variable (Перейменування змінної):**
  Змінна `t`, що означала температуру, була перейменована на `temperatureCelsius`, щоб уникнути двозначності.

- **Replace Magic Number with Symbolic Constant (Заміна магічного числа константою):**
  Умова `if (h < 30)` була незрозумілою без контексту. Число 30 було замінено на іменовану константу `MIN_HUMIDITY_PERCENT`, що зробило умову `if (humidity < MIN_HUMIDITY_PERCENT)` самоочевидною.

3. ПРИКЛАДИ КОДУ

3.1. Код ДО рефакторингу
Фрагмент монолітного коду, де логіку важко відслідкувати.

void loop() {
  float h = dht.readHumidity();
  float t = dht.readTemperature();
  if (isnan(h) || isnan(t)) return;
  
  if (h < 30) {
     digitalWrite(12, HIGH); // Вмикає щось, незрозуміло що
     delay(5000);
     digitalWrite(12, LOW);
  }
}

3.2. Код ПІСЛЯ рефакторингу
Розбиття на функції, зрозумілі назви та константи.

const int PUMP_PIN = 12;
const float MIN_HUMIDITY_PERCENT = 30.0;
const int WATERING_DURATION_MS = 5000;

void loop() {
    processEnvironmentControl();
}

void processEnvironmentControl() {
    float humidity = readHumiditySafe();
    
    if (needsWatering(humidity)) {
        activatePump();
    }
}

bool needsWatering(float humidity) {
    return humidity < MIN_HUMIDITY_PERCENT;
}

void activatePump() {
    digitalWrite(PUMP_PIN, HIGH);
    delay(WATERING_DURATION_MS);
    digitalWrite(PUMP_PIN, LOW);
}

ВИСНОВКИ
Рефакторинг значно покращив структуру та читабельність коду проєкту. Виділення методів та використання зрозумілих назв дозволяє легко модифікувати логіку догляду за рослинами. Використання Git дозволяє безпечно вносити ці зміни, зберігаючи історію версій та можливість відкату до попередніх станів.

СПИСОК ВИКОРИСТАНИХ ДЖЕРЕЛ
1. Scott Chacon, Ben Straub. Pro Git. Apress, 2014.
2. Martin Fowler. Refactoring: Improving the Design of Existing Code. Addison-Wesley.

ДОДАТОК А
Відеозапис
Посилання на відеозапис практичної роботи: https://youtu.be/tGbFq_Zq2qI
(00:00 - Робота з Git, 02:15 - Демонстрація рефакторингу).

ДОДАТОК Б
Графічні матеріали
Рисунок Б.1 – Титульний слайд
Рисунок Б.2 – Git Flow схема
Рисунок Б.3 – Техніки рефакторингу
Рисунок Б.4 – Приклад Extract Method
Рисунок Б.5 – Висновки
